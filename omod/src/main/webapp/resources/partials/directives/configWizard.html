<div>
    <div class='ng-modal-close' ng-click='dismiss()'>X</div>
    <div class='ng-modal-dialog-content container-fluid h-100' id="config-wizard-dialog">
    <div class="row fill-height" ng-show="isActiveTab('description')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="1"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div>
                <label class="alert alert-info w-100">
                    Upon login for the first time, mUzima mobile app displays the list of available
                setup configurations, and the user will need to select a setup configuration
                    that best suits their needs.
                </label>
                <label class="alert alert-success w-100">Please provide a name and a description of your setup configuration.</label>
                <input class="form-control" placeholder="Setup Name" ng-model="config.name">
                <textarea class="form-control" placeholder="Setup Description" rows="4" ng-model="config.description"></textarea>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-success btn-md pull-right" ng-click="goToNextWizardTab('registration-form-option')">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('registration-form-option')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="2"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div>
                <label class="alert alert-info w-100">
                    mUzima can be adapted to enable registration of patients and to collect various other kinds of
                    patient data through forms.
                </label>
                <label class="alert alert-success w-100">Do you plan on registering patients on the mobile application?</label>
                <label class="w-25 offset-2">
                    <input type="radio" ng-checked="config.willRegisteringPatients" ng-value="true"
                           ng-model="config.willRegisteringPatients" ng-click="goToNextWizardTab('registration-form-selection')"> Yes
                </label>
                <label  class="w-25"><input type="radio" ng-value="false"
                                            ng-model="config.willRegisteringPatients"> No</label>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"
                        ng-click="config.willRegisteringPatients ? goToNextWizardTab('registration-form-selection'):goToNextWizardTab('other-forms-option')"
                ng-disabled = "config.willRegisteringPatients == undefined">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('registration-form-selection')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="2"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <label class="alert alert-success w-100">Please select a registration form to be used for registering patients
                on the mobile application.</label>
            <div class="row">
                <div class="col-md-7" style="margin-bottom: 70px; max-height: 285px; overflow-y:scroll">
                    <table class="table table-hover table-striped">
                    <tr ng-repeat="muzimaform in muzimaforms | filter:isRegistrationForm">
                        <td>
                            <label class="w-100">{{muzimaform.form.name}}
                                <input class="pull-right" ng-checked="isFormSelected(muzimaform.form.uuid)"
                                       ng-click="toggleFormSelection(muzimaform.form)" type="checkbox"></label>
                        </td>
                    </tr>
                    </table>
                    <label ng-show="!hasRegistrationForms()" class="alert alert-error">
                        There are no registration forms available. Please click on
                        <i><u>Upload new form</u></i> button to upload a registration form.
                    </label>
                </div>
                <div class="col-md-5">
                    <button class="btn btn-primary" ng-click="goToNextWizardTab('form-upload')">Upload new form</button>
                </div>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right" ng-click="goToNextWizardTab('other-forms-option')"
                ng-disabled="!configHasRegistrationForms()">
                    Use selected <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('form-upload')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="2"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div class="row">
                <div class="col-sm-12">
                    <label class="alert alert-success w-100">Please provide details of the form to be uploaded</label>
                </div>
            </div>
            <m-uzima-form-upload upload-return-fn="setSelectedRegistrationForm"></m-uzima-form-upload>

            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right" disabled>
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('create-form-definition')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="2"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <openmrs-form-creator></openmrs-form-creator>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right" disabled>
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('other-forms-option')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="2"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div>
                <label class="alert alert-info w-100">
                    Besides registration forms, mUzima supports other kinds of forms that include:
                    <ol>
                        <li>Patient demographics update form</li>
                        <li>Person creation/relationship form</li>
                        <li>Person demographics update form</li>
                        <li>Tele-consultation form</li>
                        <li>Patient encounter form</li>
                    </ol>
                </label>
                <label class="alert alert-success w-100">Do you have any form to be downloaded to the mobile application?</label>
                <label class="w-25 offset-2">
                    <input type="radio" ng-checked="config.willFillOtherForms" ng-value="true"
                           ng-model="config.willFillOtherForms" ng-click="goToNextWizardTab('other-forms-selection')"> Yes
                </label>
                <label  class="w-25"><input type="radio" ng-value="false"
                                            ng-model="config.willFillOtherForms"> No</label>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"
                        ng-click="config.willFillOtherForms ? goToNextWizardTab('other-forms-selection'):goToNextWizardTab('cohorts')"
                        ng-disabled="config.willFillOtherForms == undefined">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('other-forms-selection')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="2"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <label class="alert alert-success w-100">Please select from available non-registration forms or upload a new one below:</label>
            <div class="row">
                <div class="col-md-7" style="margin-bottom: 70px; max-height: 285px; overflow-y:scroll">
                    <table class="table table-hover table-striped">
                        <tr ng-repeat="muzimaform in muzimaforms | filter:isNonRegistrationForm">
                            <td>
                                <label class="w-100" title="{{muzimaform.form.discriminator}}">{{muzimaform.form.name}}
                                    <input class="pull-right" ng-checked="isFormSelected(muzimaform.form.uuid)"
                                           ng-click="toggleFormSelection(muzimaform.form)" type="checkbox"></label>
                            </td>
                        </tr>
                    </table>
                    <label ng-show="!hasNonRegistrationForms()" class="alert alert-error">
                        There are no non-registration forms available. Please click on
                        <i><u>Upload new form</u></i> button to upload a form.
                    </label>
                </div>
                <div class="col-md-5">
                    <button class="btn btn-primary" ng-click="goToNextWizardTab('form-upload')">Upload new form</button>
                </div>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right" ng-click="goToNextWizardTab('cohorts')"
                ng-disabled="!configHasNonRegistrationForms()">
                    Use selected <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('cohorts')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="3"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div>
                <label class="alert alert-info w-100">
                    mUzima supports the use of Cohorts to group patient with common characteristics.
                </label>
                <label class="alert alert-success w-100">
                    Do you want to add Cohorts as part of the information that should be downloaded to the mobile application?
                </label>
                <label class="w-25">
                    <input type="radio" ng-checked="config.willAddCohorts" ng-value="true"
                           ng-model="config.willAddCohorts" ng-click="goToNextWizardTab('cohorts-selection')"> Yes
                </label>
                <label  class="w-25">
                    <input type="radio" ng-value="false" ng-model="config.willAddCohorts"> No
                </label>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"
                        ng-click="config.willAddCohorts ? goToNextWizardTab('cohorts-selection'):goToNextWizardTab('concepts')"
                        ng-disabled="config.willAddCohorts == undefined">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('cohorts-selection')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="3"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <label class="alert alert-success w-100">Please select or define new cohorts to be added to the mobile application:</label>
            <div class="row">
                <div class="col-md-7" style="margin-bottom: 70px; max-height: 285px; overflow-y:scroll">
                    <table class="table table-hover table-striped">
                        <tr ng-repeat="cohort in cohorts">
                            <td>
                                <label class="w-100" title="{{cohort.description}}">{{cohort.name}}
                                    <input class="pull-right" ng-checked="cohortExistsInConfig(cohort)"
                                           ng-click="toggleCohortSelection(cohort)" type="checkbox"></label>
                            </td>
                        </tr>
                    </table>
                    <label ng-hide="hasDefinedCohorts()" class="alert alert-error">
                        There are no Cohorts available. Please click on
                        <i><u>Define new cohort</u></i> button to create a new one.
                    </label>
                </div>
                <div class="col-md-5">
                    <button class="btn btn-primary" ng-click="goToNextWizardTab('create-cohort-definition')">Define new cohort</button>
                </div>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right" ng-click="goToNextWizardTab('concepts')"
                        ng-disabled="configHasCohorts() == false">
                    Use selected <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('create-cohort-definition')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="3"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <cohort-definition-creator></cohort-definition-creator>
            <div class="half-wizard-nav-bar" >
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('concepts')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="4"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div>
                <label class="alert alert-info w-100">
                    mUzima uses Concepts to determine the kinds of historical data that should be downloaded and retained
                    on the mobile devices after form filling. <br> <a class="learn-more">Learn more</a>
                </label>
                <label class="alert alert-success w-100">
                    Do you want to include Concepts as part of the data that should be downloaded to the mobile application?
                </label>
                <label class="w-25"><input type="radio" name="willAddConcepts"
                                           ng-value="true" ng-model="config.willAddConcepts"
                                           ng-click="goToNextWizardTab('add-concepts')"> Yes</label>
                <label  class="w-25"><input type="radio" name="willAddConcepts" value="false" ng-model="config.willAddConcepts"> No</label>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"
                        ng-click="config.willAddConcepts ? goToNextWizardTab('add-concepts'):goToNextWizardTab('locations')"
                        ng-disabled="config.willAddConcepts == undefined">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('add-concepts')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="4"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div class="row col-md-12"  style="margin-bottom: 75px">
                <label class="alert alert-success w-100">Please select Concepts to be downloaded to the mobile application:</label>
                <table class="col-md-12 table-borderless">
                    <tr align="center">
                        <td align="left">
                            <input type="text" class="form-control" ng-model="search.concepts" placeholder="Search from the Server ..." autocomplete="off"
                                   uib-typeahead="concept as concept.name.name for concept in concepts | filter:$viewValue | limitTo:15"
                                   uib-typeahead-wait-ms="500" typeahead-on-select="addConcept($item)" uib-typeahead-editable="false"/>
                        </td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr align="center">
                        <td width="45%" align="left">
                            <div class="card">
                                <label class="card-header alert-info" for="extractedNotUsedConcepts" style="">Concepts extracted from forms</label>
                                <select  ng-disabled="specialFields.extractingMeta" size="10" id="extractedNotUsedConcepts" ng-model="selected.eConcepts"
                                         style="width: 100% ; font-size: 11px;max-height:200px" multiple="multiple" class="list-group list-group-flush">
                                    <option ng-repeat="concept in extractedNotUsedConcepts" value="{{concept}}"
                                            class="list-group-item">{{concept.name}}</option>
                                </select>
                            </div>
                        </td>
                        <td width="10%" align="center">
                            <button title="Move Selected" class="btn btn-sm btn-outline-dark" ng-disabled="!selected.eConcepts.length" ng-click="moveSelected()" style="width: 50px; height: 20px; padding: 0; margin-bottom: 2px">></button><br><br>
                            <button title="Move All" class="btn btn-sm btn-outline-dark" ng-disabled="!extractedNotUsedConcepts.length" ng-click="moveAll()" style="width: 50px; height: 20px; padding: 0">>></button>
                        </td>
                        <td width="45%" align="left" valign="top">
                            <div class="card">
                                <label for="selectedConcepts" class="w-100  card-header alert-primary">Selected Concepts</label>
                                <select class="list-group list-group-flush" size="15" id="selectedConcepts" ng-model="selected.concepts"
                                        style="width: 100%; font-size: 11px;max-height:200px" multiple="multiple">
                                    <option ng-repeat="concept in configConcepts" value="{{concept}}"
                                    class="list-group-item">{{concept.name}}</option>
                                </select>
                                <button type="submit" ng-show="selected.concepts.length" ng-click="removeSelected()" class="btn btn-sm btn-outline-warning">Remove Selected</button>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right" ng-click="goToNextWizardTab('locations')">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('locations')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="5"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div>
                <label class="alert alert-info w-100">
                    We recognize that many implementations cannot download all locations to the devices for listing as
                    the care location.
                    mUzima provides the options for selecting a subset of these locations to the device. These will be
                    locations that appear as the Encounter Location for patients.<br>
                    <a class="learn-more">Learn more</a>
                </label>
                <label class="alert alert-success w-100">
                    Please search and select Encounter Location(s) you want downloaded to mUzima for this program.
                </label>
                <input class="form-control" type="search">
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"  ng-click="goToNextWizardTab('providers')">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('providers')">
        <div class="col-sm-3">
            <config-wizard-side-nav wizard-stage="6"></config-wizard-side-nav>
        </div>
        <div class="col-sm-9">
            <div>
                <label class="alert alert-info w-100">
                    We recognize that many implementations cannot download all providers to the devices for listing as
                    the care provider.
                    mUzima provides the options for selecting a subset of these providers to the device. These will be
                    providers that appear as the Encounter providers for patients.<br>
                    <a class="learn-more">Learn more</a>
                </label>
                <label class="alert alert-success w-100">
                    Please search and select Encounter Provider(s) you want downloaded to mUzima for this program.
                </label>
                <input class="form-control" type="search">
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"  ng-click="goToNextWizardTab('settings')">
                    Continue <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" style="min-width:860px" ng-show="isActiveTab('settings')">
        <div class="col-md-3">
            <config-wizard-side-nav wizard-stage="7"></config-wizard-side-nav>
        </div>
        <div class="col-md-9">
            <div style="width: 100%">
                <p></p>
                <label class="alert alert-success w-100">
                    Please review and update settings below to suit your implementation.
                </label>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"  ng-click="goToNextWizardTab('review')">
                    Next <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="row fill-height" ng-show="isActiveTab('review')">
        <div class="col-md-3">
            <config-wizard-side-nav wizard-stage="8"></config-wizard-side-nav>
        </div>
        <div class="col-md-9">
            <div style="width:100%">
                <label class="alert alert-success">
                    Review
                </label>
            </div>
            <div class="wizard-nav-bar">
                <button class="btn btn-default btn-md pull-left" ng-click="goToPreviousWizardTab()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-success btn-md pull-right"  ng-click="goToNextWizardTab('review')">
                    Save
                </button>
            </div>
        </div>
    </div>
    </div>
</div>